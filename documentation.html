<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SafeFingerPrint Library Documentation</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/themes/prism-tomorrow.min.css" rel="stylesheet" />
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; line-height: 1.6; }
        .sidebar { position: fixed; top: 0; bottom: 0; left: 0; padding: 20px; width: 260px; overflow-y: auto; background: #f8f9fa; }
        .main-content { margin-left: 280px; padding: 20px; }
        .code-block { background: #2d2d2d; border-radius: 4px; margin: 15px 0; }
        h1 { color: #2c3e50; border-bottom: 2px solid #eee; padding-bottom: 10px; }
        h2 { color: #34495e; margin-top: 40px; }
        h3 { color: #7f8c8d; margin-top: 30px; }
        .alert-tip { background-color: #d4edda; border-color: #c3e6cb; color: #155724; }
        .alert-warning { background-color: #fff3cd; border-color: #ffeeba; color: #856404; }
        pre { margin: 0; }
        .method-signature { background-color: #f8f9fa; padding: 10px; border-left: 4px solid #007bff; margin: 20px 0; }
        .parameter-table { width: 100%; margin-bottom: 1rem; }
        .nav-link { padding: .5rem 1rem; color: #495057; }
        .nav-link:hover { color: #007bff; }
        .active { color: #007bff; font-weight: bold; }
    </style>
</head>
<body>
    <div class="sidebar">
        <nav class="nav flex-column">
            <a class="nav-link" href="#introduction">Introduction</a>
            <a class="nav-link" href="#installation">Installation</a>
            <a class="nav-link" href="#quick-start">Quick Start</a>
            <a class="nav-link" href="#configuration">Configuration</a>
            <a class="nav-link" href="#basic-usage">Basic Usage</a>
            <a class="nav-link" href="#advanced-features">Advanced Features</a>
            <a class="nav-link" href="#security">Security Features</a>
            <a class="nav-link" href="#behavior-analysis">Behavior Analysis</a>
            <a class="nav-link" href="#api-reference">API Reference</a>
            <a class="nav-link" href="#troubleshooting">Troubleshooting</a>
            <a class="nav-link" href="#best-practices">Best Practices</a>
        </nav>
    </div>

    <div class="main-content">
        <h1 id="introduction">SafeFingerPrint Library Documentation</h1>
        <p class="lead">
            SafeFingerPrint is a powerful PHP library for advanced visitor tracking, bot detection, and behavior analysis.
            It provides comprehensive fingerprinting capabilities with sophisticated behavior detection algorithms to help
            protect your web applications from automated threats while maintaining legitimate user access.
        </p>

        <h2 id="installation">Installation</h2>
        <div class="code-block">
            <pre><code class="language-bash">
git clone https://github.com/yourusername/SafeFingerPrint.git
cd SafeFingerPrint
composer install
            </code></pre>
        </div>

        <div class="alert alert-tip">
            <strong>üí° Tip:</strong> Make sure your web server has write permissions for the logs directory.
        </div>

        <h2 id="quick-start">Quick Start</h2>
        <p>Here's a minimal example to get you started with SafeFingerPrint:</p>
        
        <div class="code-block">
            <pre><code class="language-php">
<?php
require_once 'autoload.php';

$tracker = new FingerprintTracker(__DIR__ . '/logs/visitors_log.json');
$tracker->inject(); // Inject tracking JavaScript
$tracker->handle(); // Handle incoming fingerprint data

// Check if current visitor should be blocked
if ($blockReasons = $tracker->shouldBlock()) {
    header('HTTP/1.0 403 Forbidden');
    exit('Access Denied: ' . implode(', ', $blockReasons));
}
            </code></pre>
        </div>

        <h2 id="configuration">Configuration Options</h2>
        <p>SafeFingerPrint offers extensive configuration options to customize its behavior:</p>

        <div class="method-signature">
            <h4>Basic Settings</h4>
            <div class="code-block">
                <pre><code class="language-php">
$options = [
    // Basic settings
    'enableIpInfo' => true,
    'ipInfoTimeout' => 5,
    'logFormat' => 'json',
    
    // Cookie settings
    'cookieLifetime' => 86400 * 365,
    'cookiePath' => '/',
    'cookieSecure' => true,
    'cookieHttpOnly' => true,
    'cookieSameSite' => 'Strict',
    
    // Security settings
    'blockTor' => true,
    'blockProxies' => true,
    'blockDatacenters' => false,
    'blockCountries' => ['North Korea', 'Anonymous Proxy'],
    
    // Behavior analysis
    'enableBehaviorScoring' => true,
    'suspiciousClickRate' => 200,
    'suspiciousMoveRate' => 1000,
    'minHumanIdleTime' => 0.2,
];

$tracker = new FingerprintTracker('logs/visitors_log.json', $options);
                </code></pre>
            </div>
        </div>

        <h2 id="basic-usage">Basic Usage</h2>
        <h3>1. Tracking Visitors</h3>
        <div class="code-block">
            <pre><code class="language-php">
// Initialize tracker
$tracker = new FingerprintTracker('logs/visitors_log.json');

// Add tracking script to your page
$tracker->inject();

// Get current visitor's fingerprint
$fingerprint = $tracker->getFingerprint();

// Get visitor's device information
$deviceInfo = $tracker->getDeviceInfo();

// Check visitor's behavior
$behavior = $tracker->getBehavior();
            </code></pre>
        </div>

        <h3>2. Security Checks</h3>
        <div class="code-block">
            <pre><code class="language-php">
// Check if visitor should be blocked
$blockReasons = $tracker->shouldBlock();

if (!empty($blockReasons)) {
    // Handle blocked access
    header('HTTP/1.0 403 Forbidden');
    exit('Access Denied: ' . implode(', ', $blockReasons));
}

// Get risk assessment
$ipInfo = $_SESSION['sfp_payload']['ip_info'] ?? [];
$riskScore = 0;

if (!empty($blockReasons)) $riskScore += 40;
if ($ipInfo['is_proxy'] ?? false) $riskScore += 20;
if ($ipInfo['is_tor'] ?? false) $riskScore += 20;
            </code></pre>
        </div>

        <h2 id="advanced-features">Advanced Features</h2>
        <h3>Custom Rules</h3>
        <div class="code-block">
            <pre><code class="language-php">
$options = [
    'customRules' => [
        // Custom rule to block specific user agents
        function($record, $data) {
            if (isset($record['device_data']['userAgent'])) {
                if (preg_match('/(bot|crawler)/i', $record['device_data']['userAgent'])) {
                    return 'bot_detected';
                }
            }
            return false;
        },
        // Custom rule for suspicious behavior
        function($record, $data) {
            if (isset($record['behavioral']['clicks']) && 
                $record['behavioral']['clicks'] > 1000) {
                return 'suspicious_activity';
            }
            return false;
        }
    ]
];
            </code></pre>
        </div>

        <h2 id="behavior-analysis">Behavior Analysis</h2>
        <p>SafeFingerPrint includes sophisticated behavior analysis features to detect bots and automated traffic:</p>

        <div class="code-block">
            <pre><code class="language-php">
$options = [
    'enableBehaviorScoring' => true,
    'mousePatternDetection' => true,
    'keyboardPatternDetection' => true,
    'browserConsistencyCheck' => true,
    'screenBehaviorCheck' => true,
    'interactionQuality' => true,
    
    // Behavior thresholds
    'suspiciousClickRate' => 200,
    'suspiciousMoveRate' => 1000,
    'minHumanIdleTime' => 0.2,
    'maxHumanSpeed' => 1000,
    'minHumanInterval' => 50
];
            </code></pre>
        </div>

        <div class="alert alert-warning">
            <strong>‚ö†Ô∏è Warning:</strong> Be careful when adjusting behavior thresholds. Setting them too strict might affect legitimate users.
        </div>

        <h3>Behavior Tracking Features</h3>
        <ul>
            <li>Mouse movement patterns and velocity</li>
            <li>Click patterns and intervals</li>
            <li>Keyboard input analysis</li>
            <li>Scroll behavior monitoring</li>
            <li>Touch event analysis</li>
            <li>Tab switching patterns</li>
            <li>Copy/paste monitoring</li>
            <li>Text selection patterns</li>
        </ul>

        <h2 id="api-reference">API Reference</h2>
        <h3>Core Methods</h3>
        <table class="table parameter-table">
            <thead>
                <tr>
                    <th>Method</th>
                    <th>Description</th>
                    <th>Parameters</th>
                    <th>Return Type</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td><code>getFingerprint()</code></td>
                    <td>Get current visitor's fingerprint</td>
                    <td>None</td>
                    <td>string|null</td>
                </tr>
                <tr>
                    <td><code>getBehavior()</code></td>
                    <td>Get visitor's behavior data</td>
                    <td>None</td>
                    <td>array</td>
                </tr>
                <tr>
                    <td><code>shouldBlock()</code></td>
                    <td>Check if visitor should be blocked</td>
                    <td>None</td>
                    <td>array</td>
                </tr>
            </tbody>
        </table>

        <h2 id="troubleshooting">Troubleshooting</h2>
        <div class="alert alert-tip">
            <h4>Common Issues and Solutions</h4>
            <ol>
                <li>
                    <strong>High False Positive Rate</strong>
                    <p>If you're getting too many false positives, try:</p>
                    <ul>
                        <li>Increasing behavior thresholds</li>
                        <li>Disabling strict mode</li>
                        <li>Adjusting custom rules</li>
                    </ul>
                </li>
                <li>
                    <strong>Performance Issues</strong>
                    <p>If you experience performance problems:</p>
                    <ul>
                        <li>Enable caching</li>
                        <li>Implement log rotation</li>
                        <li>Optimize custom rules</li>
                    </ul>
                </li>
            </ol>
        </div>

        <h2 id="best-practices">Best Practices</h2>
        <div class="alert alert-tip">
            <h4>Recommended Implementation Guidelines</h4>
            <ul>
                <li>Start with lenient settings and gradually increase strictness</li>
                <li>Implement proper error handling and logging</li>
                <li>Regularly review blocked access logs</li>
                <li>Keep the library updated</li>
                <li>Test thoroughly with different user agents and devices</li>
                <li>Monitor false positive rates</li>
                <li>Implement whitelisting for known good users</li>
                <li>Use HTTPS to protect fingerprint data</li>
            </ul>
        </div>

        <div class="alert alert-warning mt-4">
            <strong>Legal Consideration:</strong> Ensure your privacy policy includes information about fingerprinting and tracking.
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/components/prism-php.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/components/prism-bash.min.js"></script>
</body>
</html>
